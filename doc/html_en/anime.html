<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Suika2 By OpenNovel.org Manual</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    code { background-color: #CF9; }
  </style>
</head>
<body>

<h1>Anime</h1>
<p>
  The command <a href="reference.html#anime"><code>@anime</code></a> plays an anime script.
  An anime script contains sequences of animation.
</p>

<h2>Sequence</h2>
<p>
  To move the message box 100px right in a second, write the following sequence in an anime script.
</p>
<pre><code>move {
    # This is a layer specifier.
    layer: msg;

    # These are time specifiers.
    start: 0.0;
    end: 1.0;

    # These are origin position specifiers. '+0' means relative '0'.
    from-x: +0;
    from-y: +0;

    # This is an origin alpha specifier.
    from-a: 255;

    # These are final position specifiers. '+100' means relative '100'.
    to-x: +100;
    to-y: +0;

    # This is a final alpha specifier.
    to-a: 255;
}</code></pre>

<h2>Layer Structure</h2>
<p>
  The layer structure and its layers are the following.
</p>
<pre><code>text8
text7
text6
text5
text4
text3
text2
text1 

chf  (character face)
name (name box)
msg  (message box)

effect4
effect3
effect2
effect1
 
chc  (center character)
chrc (right center character)
chr  (right character)
chlc (left center character)
chl  (left character)
chb  (center back character)

effect8
effect7
effect6
effect5
 
bg2  (second background)
bg   (background)</code></pre>

<p>
  <code>effect1-effect4</code> are typically for weather animations.
  <code>text1-text8</code> are layers to draw text using the <a href="reference.html#text"><code>@text</code></a> command.
</p>

<h2>Scaling and Rotation</h2>
<pre><code>test1 {
    layer: effect1;
 
    start: 0.0;
    end: 3.0;

    from-x: 0;
    from-y: 400;
    from-a: 255;

    to-x: 0;
    to-y: 400;
    to-a: 255;

    # Scaling and rotation origin
    center-x: 600;
    center-y: 100;

    # Scaling factors
    from-scale-x: 1.0;
    from-scale-y: 1.0;
    to-scale-x: 2.0;
    to-scale-y: 2.0;
 
    # Rotation (+ for right, - for left)
    from-rotate: 0.0;
    to-rotate: -360;
}
test2 {
    layer: effect1;

    start: 3.0;
    end: 6.0;

    from-x: 0;
    from-y: 400;
    from-a: 255;

    to-x: 0;
    to-y: 400;
    to-a: 255;

    center-x: 600;
    center-y: 100;

    from-scale-x: 2.0;
    to-scale-x: 1.0;

    from-scale-y: 2.0;
    to-scale-y: 1.0;

    from-rotate: -360;
    to-rotate: 0;
}</code></pre>

<h2>Resetting Anime</h2>
<p>
  You can use the <code>@anime reset</code> command to reset animation parameters.
</p>
<pre><code>@anime reset layer-bg,xy,scale,rotate
@anime reset layer-chc,xy,scale,rotate
@anime reset layer-all,xy,scale,rotate</code></pre>

<p>
  <code>layer-bg</code> means resetting the background layer parameters.
  <code>layer-chc</code> means resetting the center character layer parameters.
  <code>layer-all</code> means resetting all layer parameters.

  <code>xy</code> means resetting x and y parameters.
  <code>scale</code> means resetting scaling parameters.
  <code>rotate</code> means resetting rotation parameters.

  For example, the following resets the scale factor of the background.
</p>
<pre><code>@anime reset layer-bg,scale</code></pre>

<h2>Clearing Anime</h2>
<p>
  If you want to force-quit an anime of a specific layer, use the <code>@anime clear</code> command.
</p>
<pre><code>@anime clear layer-bg,layer-chc</code></pre>
<p>
  If you want to wait until all anime finish, use the <code>@anime finish-all</code> command.
</p>
<pre><code>@anime finish-all</code></pre>
<p>
  If you want to cancel all animations, use the <code>layer-all</code> option.
</p>
<pre><code>@anime clear layer-all</code></pre>

</body>
</html>
